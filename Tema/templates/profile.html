{% extends 'layout.html' %}

{% block content %}
{{ super() }}
{% for cat, msg in get_flashed_messages(True) %}
<div class="flash {{ cat }}">{{ msg }}</div>
{% endfor %}
<style>


    .profile-container {
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        height: 100vh;
        padding: 20px;
        box-sizing: border-box;
    }

    .profile-card {
        width: 400px;
        padding: 20px;
        border-radius: 10px;
        background-color: #f0f0f0;
    }

    .profile-title {
        text-align: center;
        margin-bottom: 20px;
    }

    .profile-info {
        margin-bottom: 20px;
    }

    .profile-info-item {
        display: flex;
        margin-bottom: 10px;
    }

    .profile-info-label {
        font-weight: bold;
        margin-right: 5px;
    }

    .profile-avatar {
        text-align: center;
        margin-bottom: 20px;
    }

    .profile-avatar img {
        width: 200px; /* Задайте желаемую ширину */
        height: 200px; /* Задайте желаемую высоту */
        object-fit: cover; /* Подгоняет изображение в соответствии с заданными размерами */
        border-radius: 50%; /* Опционально: добавляет закругленные углы для круглого аватара */
    }


    .profile-upload {
        text-align: center;
    }

    .flash {
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 5px;
        font-weight: bold;
    }

    .flash.error {
        background-color: #c95f5f; /* Красный цвет для сообщений с категорией "error" */
        color: #ffffff; /* Белый цвет текста для лучшей читаемости */
    }

    .flash.success {
        background-color: #5ace5a; /* Зеленый цвет для других сообщений */
        color: #fffefe; /* Черный цвет текста */
    }


</style>
<div class="profile-container">
    <div class="profile-card">
        <h1 class="profile-title">Профиль пользователя</h1>


        <div class="profile-info">
            <div class="profile-info-item">
                <span class="profile-info-label">Имя:</span>
                <span class="profile-info-value">{{ user.first_name }}</span>
            </div>
            <div class="profile-info-item">
                <span class="profile-info-label">Фамилия:</span>
                <span class="profile-info-value">{{ user.last_name }}</span>
            </div>
            <div class="profile-info-item">
                <span class="profile-info-label">Имя пользователя:</span>
                <span class="profile-info-value">{{ user.username }}</span>
            </div>
            <div class="profile-info-item">
                <span class="profile-info-label">Email:</span>
                <span class="profile-info-value">{{ user.email }}</span>
            </div>


            <div class="profile-actions">
                {#кнопка "Редактировать профиль" должна вызывать функцию, которая показывает модальное окно#}
                <!-- Добавьте кнопку с вызовом функции showModal() -->
                <a href="#" class="btn btn-warning" onclick="showModal()">Редактировать профиль</a>

                <!-- Добавьте модальное окно -->
                <div id="edit-profile-modal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal()">&times;</span>
                        <div id="edit-profile-content"></div>
                    </div>
                </div>


                <a href="#" class="btn btn-danger" id="delete-profile-btn">Удалить профиль</a>

                {#Вместо {{ url_for('delete_profile') }} мы используем # в атрибуте href, чтобы предотвратить переход по
                ссылке.#}

            </div>


        </div>

        <div class="profile-avatar">
            <img id="profile-avatar-img" src="{{ url_for('static', filename='imgs/' + user.image_file) }}"
                 alt="Аватар">
        </div>


        <div class="profile-upload">
            <form id="profile-upload-form" action="{{ url_for('upload') }}" method="POST"
                  enctype="multipart/form-data">
                <div class="form-group">
                    <label for="file">Изменить аватар:</label>
                    <input type="file" name="file" id="profile-file-input" class="form-control-file">
                </div>
                <div class="form-group">
                    <input type="submit" value="Загрузить" class="btn btn-primary">
                </div>
            </form>
        </div>


    </div>
</div>